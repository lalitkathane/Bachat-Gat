<!-- templates/dashboard.html -->
{% extends "base.html" %}

{% block content %}
<h2>{{ t.dashboard }}</h2>
<div class="row">
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5>{{ t.totalSavings }}</h5>
                <p>₹{{ total_savings }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5>{{ t.activeLoans }}</h5>
                <p>{{ active_loans }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-body">
                <h5>{{ t.repaymentRate }}</h5>
                <p>{{ repayment_rate }}%</p>
            </div>
        </div>
    </div>
</div>
<div class="row mt-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">Recent Savings</div>
            <ul class="list-group list-group-flush">
                {% for s in recent_savings %}
                <li class="list-group-item">
                    {{ (members|selectattr('id', 'equalto', s.memberId)|first).name }} - ₹{{ s.amount }}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">Active Loans</div>
            <ul class="list-group list-group-flush">
                {% for l in loans %}
                <li class="list-group-item">
                    #{{ l.id }} - {{ (members|selectattr('id', 'equalto', l.memberId)|first).name }} - ₹{{ l.amount }} ({{ l.status }})
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}